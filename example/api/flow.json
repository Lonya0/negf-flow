{
    "name": "negf-flow",
    "default_step_config": {
		"template_config": {
            "image": ""
        },
        "executor": {
            "type": "dispatcher",
            "image_pull_policy": "IfNotPresent",
            "machine_dict": {
                "batch_type": "Shell",
				"context_type": "LazyLocalContext",
				"local_root": "./"
			},
			"resources_dict": {
				"number_node": 1,
				"gpu_per_node": 2,
				"cpu_per_node": 2,
				"custom_flags": ["source /root/shared-nvme/CNT/negf-flow/example/api/local.env"],
				"source_list": []
			},
			"clean": false
        }
    },
    "step_configs": {
		"run_relax_config": {
			"template_config": {
				"image": ""
			},
			"executor": {
				"type": "dispatcher",
				"image_pull_policy": "IfNotPresent",
				"machine_dict": {
					"batch_type": "Slurm",
					"context_type": "SSHContext",
					"local_root": "./",
					"remote_root": "/data/home/sczc167/run/yyt/cnt/negf_lmp",
					"remote_profile": { 
						"hostname": "ssh.cn-zhongwei-1.paracloud.com",
						"username": "sczc167@BSCC-N16R4",
						"timeout": 600,
						"port": 22,
						"key_filename": "/root/.ssh/id_ed25519" 
					}
				},
				"resources_dict": {
					"number_node": 1,
					"gpu_per_node": 2,
					"cpu_per_node": 2,
					"queue_name": "gpu",
					"custom_flags": ["source /data/home/sczc167/run/dp3env.sh"],
					"source_list": [],
					"module_list": []
				},
				"clean": false
			}
        },
		"run_overlap_config": {
			"template_config": {
				"image": ""
			},
			"executor": {
				"type": "dispatcher",
				"image_pull_policy": "IfNotPresent",
				"machine_dict": {
					"batch_type": "Slurm",
					"context_type": "SSHContext",
					"local_root": "./",
					"remote_root": "/data/home/sczc167/run/yyt/cnt/negf_ovp",
					"remote_profile": {
						"hostname": "ssh.cn-zhongwei-1.paracloud.com",
						"username": "sczc167@BSCC-N16R4",
						"timeout": 600,
						"port": 22,
						"key_filename": "/root/.ssh/id_ed25519" 
					}
				},
				"resources_dict": {
					"number_node": 1,
					"gpu_per_node": 2,
					"cpu_per_node": 2,
					"queue_name": "gpu",
					"custom_flags": ["source /data/home/sczc167/run/dp3env.sh"],
					"source_list": [],
					"module_list": []
				},
				"clean": false
			}
        }
    },
    "task":{
        "type": "negf",
		"use_external_overlap": true
    },
    "inputs": {
		"init_confs_prefix": "./init_confs/",
		"init_confs_paths": [
			"10_0.vasp"
		],
        "deepmd_model_path": "frozen_model.pb",
		"deepmd_model_type_map": ["C"],
		"deeptb_model_path": "mix.ep636.pth"
    },
    "negf":{
		"config": "negf.json",
		"supercell": {
			"lead_L": 2,
			"device": 2,
			"lead_R": 2
		},
		"direction": "z"
    },
    "relax": {
		"type": "lmp",
		"config": "lammps.in",
        "ensemble": "nvt",
		"dt": 0.001,
		"nsteps": 1000,
		"temps": [300],
		"press": [0],
		"run_config": {
			"command": "lmp"
		}
	},
    "overlap": {
        "type": "abacus",
        "run_config": {
            "command": "OMP_NUM_THREADS=4 mpirun -np 8 abacus | tee log"
        },
        "inputs_config": {
            "input_file": "INPUT_ovp",
            "pp_files": {
                "C": "C.upf"
            },
            "orb_files": {
				"C": "C_gga_8au_100Ry_2s2p1d.orb"
			}
        }
    }
}
